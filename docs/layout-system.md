# Vue-Flow åå°ç®¡ç†ç³»ç»Ÿå¸ƒå±€ç³»ç»Ÿè®¾è®¡

## ğŸ“‹ ç›®å½•

1. [å¸ƒå±€ç³»ç»Ÿæ¦‚è¿°](#å¸ƒå±€ç³»ç»Ÿæ¦‚è¿°)
2. [å“åº”å¼å¸ƒå±€è®¾è®¡](#å“åº”å¼å¸ƒå±€è®¾è®¡)
3. [ä¸»å¸ƒå±€ç»„ä»¶](#ä¸»å¸ƒå±€ç»„ä»¶)
4. [ä¾§è¾¹æ ç³»ç»Ÿ](#ä¾§è¾¹æ ç³»ç»Ÿ)
5. [å†…å®¹åŒºåŸŸå¸ƒå±€](#å†…å®¹åŒºåŸŸå¸ƒå±€)
6. [é¢æ¿ç³»ç»Ÿ](#é¢æ¿ç³»ç»Ÿ)
7. [ç§»åŠ¨ç«¯é€‚é…](#ç§»åŠ¨ç«¯é€‚é…)
8. [å¸ƒå±€ä¸»é¢˜ç³»ç»Ÿ](#å¸ƒå±€ä¸»é¢˜ç³»ç»Ÿ)

---

## ğŸ¯ å¸ƒå±€ç³»ç»Ÿæ¦‚è¿°

### è®¾è®¡ç†å¿µ

åŸºäºvue-flowçš„åå°ç®¡ç†ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å¸ƒå±€è®¾è®¡ï¼Œæä¾›çµæ´»ã€å“åº”å¼å’Œå¯å®šåˆ¶çš„ç”¨æˆ·ç•Œé¢ã€‚å¸ƒå±€ç³»ç»Ÿéµå¾ªä»¥ä¸‹åŸåˆ™ï¼š

- **æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ªå¸ƒå±€ç»„ä»¶ç‹¬ç«‹å¯å¤ç”¨
- **å“åº”å¼ä¼˜å…ˆ**: ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å®Œç¾é€‚é…
- **å¯å®šåˆ¶æ€§**: æ”¯æŒä¸»é¢˜åˆ‡æ¢å’Œå¸ƒå±€è°ƒæ•´
- **æ€§èƒ½ä¼˜åŒ–**: é«˜æ•ˆçš„æ¸²æŸ“å’Œäº¤äº’ä½“éªŒ
- **å¯è®¿é—®æ€§**: ç¬¦åˆWCAGæ ‡å‡†çš„æ— éšœç¢è®¾è®¡

### å¸ƒå±€æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Admin Layout                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚             â”‚  â”‚
â”‚  â”‚   Sidebar   â”‚  â”‚    Main Content     â”‚  â”‚ Properties  â”‚  â”‚
â”‚  â”‚             â”‚  â”‚                     â”‚  â”‚   Panel     â”‚  â”‚
â”‚  â”‚   - Menu    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚   - Nav     â”‚  â”‚  â”‚    Header     â”‚  â”‚  â”‚ - Settings  â”‚  â”‚
â”‚  â”‚   - User    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚ - Details   â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ - Actions   â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚  Breadcrumb   â”‚  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚               â”‚  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚  Vue-Flow     â”‚  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚   Canvas      â”‚  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â”‚               â”‚  â”‚  â”‚             â”‚  â”‚
â”‚  â”‚             â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± å“åº”å¼å¸ƒå±€è®¾è®¡

### æ–­ç‚¹ç³»ç»Ÿ

```scss
// styles/breakpoints.scss
$breakpoints: (
  'xs': 0,
  'sm': 576px,
  'md': 768px,
  'lg': 992px,
  'xl': 1200px,
  'xxl': 1400px
);

// å“åº”å¼æ··åˆå™¨
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
.admin-layout {
  display: flex;
  flex-direction: column;
  
  @include respond-to('md') {
    flex-direction: row;
  }
}
```

### å¸ƒå±€å®¹å™¨

```vue
<!-- components/admin/layout/ResponsiveContainer.vue -->
<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted } from 'vue'

interface Props {
  maxWidth?: string
  padding?: string
  fluid?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  maxWidth: '1200px',
  padding: '24px',
  fluid: false
})

const containerRef = ref<HTMLElement>()
const screenSize = ref<'xs' | 'sm' | 'md' | 'lg' | 'xl' | 'xxl'>('lg')

const containerClasses = computed(() => [
  'responsive-container',
  `responsive-container--${screenSize.value}`,
  {
    'responsive-container--fluid': props.fluid
  }
])

const containerStyles = computed(() => ({
  maxWidth: props.fluid ? '100%' : props.maxWidth,
  padding: props.padding
}))

const updateScreenSize = () => {
  const width = window.innerWidth
  
  if (width < 576) {
    screenSize.value = 'xs'
  } else if (width < 768) {
    screenSize.value = 'sm'
  } else if (width < 992) {
    screenSize.value = 'md'
  } else if (width < 1200) {
    screenSize.value = 'lg'
  } else if (width < 1400) {
    screenSize.value = 'xl'
  } else {
    screenSize.value = 'xxl'
  }
}

onMounted(() => {
  updateScreenSize()
  window.addEventListener('resize', updateScreenSize)
})

onUnmounted(() => {
  window.removeEventListener('resize', updateScreenSize)
})

defineExpose({
  screenSize: readonly(screenSize)
})
</script>

<template>
  <div 
    ref="containerRef"
    :class="containerClasses"
    :style="containerStyles"
  >
    <slot :screen-size="screenSize" />
  </div>
</template>

<style scoped>
.responsive-container {
  width: 100%;
  margin: 0 auto;
  transition: all 0.3s ease;
}

.responsive-container--fluid {
  max-width: none !important;
}

/* ä¸åŒå±å¹•å°ºå¯¸çš„ç‰¹å®šæ ·å¼ */
.responsive-container--xs {
  padding: 12px;
}

.responsive-container--sm {
  padding: 16px;
}

.responsive-container--md {
  padding: 20px;
}

.responsive-container--lg {
  padding: 24px;
}

.responsive-container--xl {
  padding: 32px;
}

.responsive-container--xxl {
  padding: 40px;
}
</style>
```

---

## ğŸ—ï¸ ä¸»å¸ƒå±€ç»„ä»¶

### ç®¡ç†åå°ä¸»å¸ƒå±€

```vue
<!-- components/admin/layout/AdminLayout.vue -->
<script setup lang="ts">
import { ref, computed, provide, onMounted } from 'vue'
import { useUIStore } from '@/stores/ui'
import AdminSidebar from './AdminSidebar.vue'
import AdminHeader from './AdminHeader.vue'
import AdminBreadcrumb from './AdminBreadcrumb.vue'
import AdminFooter from './AdminFooter.vue'
import ResizeHandle from './ResizeHandle.vue'

interface Props {
  sidebarCollapsible?: boolean
  showBreadcrumb?: boolean
  showFooter?: boolean
  fluid?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  sidebarCollapsible: true,
  showBreadcrumb: true,
  showFooter: false,
  fluid: false
})

const uiStore = useUIStore()

// å¸ƒå±€çŠ¶æ€
const sidebarWidth = ref(280)
const propertiesPanelWidth = ref(320)
const isResizingSidebar = ref(false)
const isResizingProperties = ref(false)

// è®¡ç®—å±æ€§
const layoutClasses = computed(() => [
  'admin-layout',
  {
    'admin-layout--sidebar-collapsed': uiStore.sidebarCollapsed,
    'admin-layout--properties-collapsed': uiStore.propertiesPanelCollapsed,
    'admin-layout--fluid': props.fluid,
    'admin-layout--resizing': isResizingSidebar.value || isResizingProperties.value
  }
])

const mainContentStyles = computed(() => ({
  marginLeft: uiStore.sidebarCollapsed ? '64px' : `${sidebarWidth.value}px`,
  marginRight: uiStore.propertiesPanelCollapsed ? '0' : `${propertiesPanelWidth.value}px`
}))

// å¸ƒå±€ä¸Šä¸‹æ–‡
const layoutContext = {
  sidebarWidth: readonly(sidebarWidth),
  propertiesPanelWidth: readonly(propertiesPanelWidth),
  sidebarCollapsed: computed(() => uiStore.sidebarCollapsed),
  propertiesPanelCollapsed: computed(() => uiStore.propertiesPanelCollapsed),
  toggleSidebar: () => uiStore.toggleSidebar(),
  togglePropertiesPanel: () => uiStore.togglePropertiesPanel()
}

provide('layout', layoutContext)

// ä¾§è¾¹æ è°ƒæ•´å¤§å°
const handleSidebarResize = (delta: number) => {
  const newWidth = Math.max(200, Math.min(400, sidebarWidth.value + delta))
  sidebarWidth.value = newWidth
  uiStore.setSidebarWidth(newWidth)
}

const handleSidebarResizeStart = () => {
  isResizingSidebar.value = true
}

const handleSidebarResizeEnd = () => {
  isResizingSidebar.value = false
}

// å±æ€§é¢æ¿è°ƒæ•´å¤§å°
const handlePropertiesResize = (delta: number) => {
  const newWidth = Math.max(250, Math.min(500, propertiesPanelWidth.value - delta))
  propertiesPanelWidth.value = newWidth
  uiStore.setPropertiesPanelWidth(newWidth)
}

const handlePropertiesResizeStart = () => {
  isResizingProperties.value = true
}

const handlePropertiesResizeEnd = () => {
  isResizingProperties.value = false
}

// é”®ç›˜å¿«æ·é”®
const handleKeydown = (event: KeyboardEvent) => {
  // Ctrl/Cmd + B: åˆ‡æ¢ä¾§è¾¹æ 
  if ((event.ctrlKey || event.metaKey) && event.key === 'b') {
    event.preventDefault()
    uiStore.toggleSidebar()
  }
  
  // Ctrl/Cmd + Shift + P: åˆ‡æ¢å±æ€§é¢æ¿
  if ((event.ctrlKey || event.metaKey) && event.shiftKey && event.key === 'P') {
    event.preventDefault()
    uiStore.togglePropertiesPanel()
  }
}

onMounted(() => {
  document.addEventListener('keydown', handleKeydown)
  
  // åˆå§‹åŒ–å¸ƒå±€å°ºå¯¸
  sidebarWidth.value = uiStore.layoutConfig.sidebarWidth
  propertiesPanelWidth.value = uiStore.layoutConfig.propertiesPanelWidth
})

onUnmounted(() => {
  document.removeEventListener('keydown', handleKeydown)
})
</script>

<template>
  <div :class="layoutClasses">
    <!-- ä¾§è¾¹æ  -->
    <AdminSidebar 
      :width="sidebarWidth"
      :collapsed="uiStore.sidebarCollapsed"
      :collapsible="sidebarCollapsible"
      class="admin-layout__sidebar"
    />
    
    <!-- ä¾§è¾¹æ è°ƒæ•´æ‰‹æŸ„ -->
    <ResizeHandle
      v-if="!uiStore.sidebarCollapsed"
      direction="vertical"
      :position="sidebarWidth"
      class="admin-layout__sidebar-resize"
      @resize="handleSidebarResize"
      @resize-start="handleSidebarResizeStart"
      @resize-end="handleSidebarResizeEnd"
    />
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div 
      class="admin-layout__main"
      :style="mainContentStyles"
    >
      <!-- é¡¶éƒ¨å¯¼èˆª -->
      <AdminHeader class="admin-layout__header" />
      
      <!-- é¢åŒ…å±‘å¯¼èˆª -->
      <AdminBreadcrumb 
        v-if="showBreadcrumb"
        class="admin-layout__breadcrumb" 
      />
      
      <!-- å†…å®¹åŒºåŸŸ -->
      <main class="admin-layout__content">
        <slot />
      </main>
      
      <!-- åº•éƒ¨ -->
      <AdminFooter 
        v-if="showFooter"
        class="admin-layout__footer" 
      />
    </div>
    
    <!-- å±æ€§é¢æ¿è°ƒæ•´æ‰‹æŸ„ -->
    <ResizeHandle
      v-if="!uiStore.propertiesPanelCollapsed"
      direction="vertical"
      :position="propertiesPanelWidth"
      class="admin-layout__properties-resize"
      @resize="handlePropertiesResize"
      @resize-start="handlePropertiesResizeStart"
      @resize-end="handlePropertiesResizeEnd"
    />
    
    <!-- å±æ€§é¢æ¿ -->
    <div 
      v-if="!uiStore.propertiesPanelCollapsed"
      class="admin-layout__properties"
      :style="{ width: `${propertiesPanelWidth}px` }"
    >
      <slot name="properties" />
    </div>
  </div>
</template>

<style scoped>
.admin-layout {
  display: flex;
  min-height: 100vh;
  background: var(--color-background);
  position: relative;
  overflow: hidden;
}

.admin-layout--resizing {
  user-select: none;
  cursor: col-resize;
}

.admin-layout__sidebar {
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  z-index: 1000;
  transition: width 0.3s ease, transform 0.3s ease;
}

.admin-layout--sidebar-collapsed .admin-layout__sidebar {
  width: 64px;
}

.admin-layout__sidebar-resize {
  position: fixed;
  top: 0;
  z-index: 999;
  width: 4px;
  height: 100vh;
  cursor: col-resize;
  background: transparent;
  transition: left 0.3s ease;
}

.admin-layout__sidebar-resize:hover {
  background: var(--color-primary);
  opacity: 0.5;
}

.admin-layout__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  transition: margin 0.3s ease;
  position: relative;
}

.admin-layout__header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
  backdrop-filter: blur(8px);
}

.admin-layout__breadcrumb {
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border-light);
  padding: 12px 24px;
}

.admin-layout__content {
  flex: 1;
  padding: 24px;
  overflow: auto;
  position: relative;
}

.admin-layout__footer {
  background: var(--color-surface);
  border-top: 1px solid var(--color-border);
  padding: 16px 24px;
}

.admin-layout__properties-resize {
  position: fixed;
  top: 0;
  right: var(--properties-panel-width, 320px);
  z-index: 999;
  width: 4px;
  height: 100vh;
  cursor: col-resize;
  background: transparent;
  transition: right 0.3s ease;
}

.admin-layout__properties-resize:hover {
  background: var(--color-primary);
  opacity: 0.5;
}

.admin-layout__properties {
  position: fixed;
  top: 0;
  right: 0;
  height: 100vh;
  background: var(--color-surface);
  border-left: 1px solid var(--color-border);
  z-index: 998;
  overflow-y: auto;
  transition: width 0.3s ease;
}

/* å“åº”å¼é€‚é… */
@media (max-width: 768px) {
  .admin-layout__sidebar {
    transform: translateX(-100%);
  }
  
  .admin-layout__sidebar.open {
    transform: translateX(0);
  }
  
  .admin-layout__main {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  .admin-layout__properties {
    transform: translateX(100%);
  }
  
  .admin-layout__properties.open {
    transform: translateX(0);
  }
  
  .admin-layout__sidebar-resize,
  .admin-layout__properties-resize {
    display: none;
  }
}

/* æµä½“å¸ƒå±€ */
.admin-layout--fluid .admin-layout__content {
  padding: 0;
}

/* æš—è‰²ä¸»é¢˜é€‚é… */
[data-theme="dark"] .admin-layout {
  background: var(--color-background-dark);
}

[data-theme="dark"] .admin-layout__header,
[data-theme="dark"] .admin-layout__breadcrumb,
[data-theme="dark"] .admin-layout__footer,
[data-theme="dark"] .admin-layout__properties {
  background: var(--color-surface-dark);
  border-color: var(--color-border-dark);
}
</style>
```

### è°ƒæ•´å¤§å°æ‰‹æŸ„ç»„ä»¶

```vue
<!-- components/admin/layout/ResizeHandle.vue -->
<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted } from 'vue'

interface Props {
  direction: 'horizontal' | 'vertical'
  position: number
  minSize?: number
  maxSize?: number
  disabled?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  minSize: 100,
  maxSize: 800,
  disabled: false
})

interface Emits {
  'resize': [delta: number]
  'resize-start': []
  'resize-end': []
}

const emit = defineEmits<Emits>()

const isResizing = ref(false)
const startPosition = ref(0)
const currentPosition = ref(0)

const handleClasses = computed(() => [
  'resize-handle',
  `resize-handle--${props.direction}`,
  {
    'resize-handle--resizing': isResizing.value,
    'resize-handle--disabled': props.disabled
  }
])

const handleStyles = computed(() => {
  if (props.direction === 'vertical') {
    return {
      left: `${props.position}px`
    }
  } else {
    return {
      top: `${props.position}px`
    }
  }
})

const startResize = (event: MouseEvent) => {
  if (props.disabled) return
  
  event.preventDefault()
  isResizing.value = true
  
  if (props.direction === 'vertical') {
    startPosition.value = event.clientX
  } else {
    startPosition.value = event.clientY
  }
  
  currentPosition.value = startPosition.value
  
  document.addEventListener('mousemove', handleResize)
  document.addEventListener('mouseup', endResize)
  document.body.style.cursor = props.direction === 'vertical' ? 'col-resize' : 'row-resize'
  document.body.style.userSelect = 'none'
  
  emit('resize-start')
}

const handleResize = (event: MouseEvent) => {
  if (!isResizing.value) return
  
  const newPosition = props.direction === 'vertical' ? event.clientX : event.clientY
  const delta = newPosition - currentPosition.value
  
  currentPosition.value = newPosition
  emit('resize', delta)
}

const endResize = () => {
  if (!isResizing.value) return
  
  isResizing.value = false
  
  document.removeEventListener('mousemove', handleResize)
  document.removeEventListener('mouseup', endResize)
  document.body.style.cursor = ''
  document.body.style.userSelect = ''
  
  emit('resize-end')
}

// é”®ç›˜æ”¯æŒ
const handleKeydown = (event: KeyboardEvent) => {
  if (props.disabled) return
  
  let delta = 0
  const step = event.shiftKey ? 10 : 1
  
  if (props.direction === 'vertical') {
    if (event.key === 'ArrowLeft') {
      delta = -step
    } else if (event.key === 'ArrowRight') {
      delta = step
    }
  } else {
    if (event.key === 'ArrowUp') {
      delta = -step
    } else if (event.key === 'ArrowDown') {
      delta = step
    }
  }
  
  if (delta !== 0) {
    event.preventDefault()
    emit('resize', delta)
  }
}

onMounted(() => {
  document.addEventListener('keydown', handleKeydown)
})

onUnmounted(() => {
  document.removeEventListener('keydown', handleKeydown)
  document.removeEventListener('mousemove', handleResize)
  document.removeEventListener('mouseup', endResize)
})
</script>

<template>
  <div
    :class="handleClasses"
    :style="handleStyles"
    @mousedown="startResize"
    tabindex="0"
    role="separator"
    :aria-orientation="direction === 'vertical' ? 'vertical' : 'horizontal'"
    :aria-disabled="disabled"
  >
    <div class="resize-handle__indicator">
      <div class="resize-handle__line"></div>
      <div class="resize-handle__line"></div>
      <div class="resize-handle__line"></div>
    </div>
  </div>
</template>

<style scoped>
.resize-handle {
  position: absolute;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  transition: background-color 0.2s ease;
}

.resize-handle:hover:not(.resize-handle--disabled) {
  background: var(--color-primary);
  opacity: 0.3;
}

.resize-handle:focus {
  outline: 2px solid var(--color-primary);
  outline-offset: 2px;
}

.resize-handle--vertical {
  width: 8px;
  height: 100%;
  cursor: col-resize;
}

.resize-handle--horizontal {
  width: 100%;
  height: 8px;
  cursor: row-resize;
}

.resize-handle--resizing {
  background: var(--color-primary);
  opacity: 0.5;
}

.resize-handle--disabled {
  cursor: not-allowed;
  opacity: 0.3;
}

.resize-handle__indicator {
  display: flex;
  gap: 2px;
  opacity: 0;
  transition: opacity 0.2s ease;
}

.resize-handle:hover .resize-handle__indicator,
.resize-handle:focus .resize-handle__indicator,
.resize-handle--resizing .resize-handle__indicator {
  opacity: 1;
}

.resize-handle--vertical .resize-handle__indicator {
  flex-direction: column;
}

.resize-handle--horizontal .resize-handle__indicator {
  flex-direction: row;
}

.resize-handle__line {
  background: var(--color-text-inverse);
  border-radius: 1px;
}

.resize-handle--vertical .resize-handle__line {
  width: 2px;
  height: 12px;
}

.resize-handle--horizontal .resize-handle__line {
  width: 12px;
  height: 2px;
}
</style>
```

---

## ğŸ—‚ï¸ ä¾§è¾¹æ ç³»ç»Ÿ

### å¯æŠ˜å å¯¼èˆªä¾§è¾¹æ 

```vue
<!-- components/admin/layout/AdminSidebar.vue -->
<script setup lang="ts">
import { ref, computed, watch } from 'vue'
import { useRouter, useRoute } from 'vue-router'
import { useAdminStore } from '@/stores/admin'
import SidebarMenuItem from './SidebarMenuItem.vue'
import UserProfile from './UserProfile.vue'

interface Props {
  width: number
  collapsed: boolean
  collapsible: boolean
}

const props = defineProps<Props>()

interface Emits {
  'toggle': []
  'item-click': [item: MenuItem]
}

const emit = defineEmits<Emits>()

const router = useRouter()
const route = useRoute()
const adminStore = useAdminStore()

// èœå•é¡¹å®šä¹‰
interface MenuItem {
  id: string
  label: string
  icon: string
  path?: string
  children?: MenuItem[]
  badge?: string | number
  disabled?: boolean
  permission?: string
}

const menuItems = ref<MenuItem[]>([
  {
    id: 'dashboard',
    label: 'ä»ªè¡¨æ¿',
    icon: 'ğŸ“Š',
    path: '/admin/dashboard'
  },
  {
    id: 'users',
    label: 'ç”¨æˆ·ç®¡ç†',
    icon: 'ğŸ‘¥',
    children: [
      {
        id: 'user-list',
        label: 'ç”¨æˆ·åˆ—è¡¨',
        icon: 'ğŸ“‹',
        path: '/admin/users/list'
      },
      {
        id: 'user-roles',
        label: 'è§’è‰²ç®¡ç†',
        icon: 'ğŸ­',
        path: '/admin/users/roles'
      },
      {
        id: 'user-permissions',
        label: 'æƒé™ç®¡ç†',
        icon: 'ğŸ”',
        path: '/admin/users/permissions'
      }
    ]
  },
  {
    id: 'workflows',
    label: 'å·¥ä½œæµç®¡ç†',
    icon: 'ğŸ”„',
    children: [
      {
        id: 'workflow-list',
        label: 'å·¥ä½œæµåˆ—è¡¨',
        icon: 'ğŸ“',
        path: '/admin/workflows/list'
      },
      {
        id: 'workflow-templates',
        label: 'æ¨¡æ¿ç®¡ç†',
        icon: 'ğŸ“„',
        path: '/admin/workflows/templates'
      },
      {
        id: 'workflow-execution',
        label: 'æ‰§è¡Œå†å²',
        icon: 'â±ï¸',
        path: '/admin/workflows/execution'
      }
    ]
  },
  {
    id: 'monitoring',
    label: 'ç›‘æ§ä¸­å¿ƒ',
    icon: 'ğŸ“ˆ',
    children: [
      {
        id: 'system-monitor',
        label: 'ç³»ç»Ÿç›‘æ§',
        icon: 'ğŸ’»',
        path: '/admin/monitoring/system'
      },
      {
        id: 'performance',
        label: 'æ€§èƒ½åˆ†æ',
        icon: 'âš¡',
        path: '/admin/monitoring/performance'
      },
      {
        id: 'logs',
        label: 'æ—¥å¿—ç®¡ç†',
        icon: 'ğŸ“œ',
        path: '/admin/monitoring/logs'
      },
      {
        id: 'alerts',
        label: 'å‘Šè­¦ç®¡ç†',
        icon: 'ğŸš¨',
        path: '/admin/monitoring/alerts',
        badge: adminStore.unreadAlertsCount
      }
    ]
  },
  {
    id: 'data',
    label: 'æ•°æ®ç®¡ç†',
    icon: 'ğŸ—„ï¸',
    children: [
      {
        id: 'data-sources',
        label: 'æ•°æ®æº',
        icon: 'ğŸ”Œ',
        path: '/admin/data/sources'
      },
      {
        id: 'data-backup',
        label: 'å¤‡ä»½ç®¡ç†',
        icon: 'ğŸ’¾',
        path: '/admin/data/backup'
      },
      {
        id: 'data-import',
        label: 'æ•°æ®å¯¼å…¥',
        icon: 'ğŸ“¥',
        path: '/admin/data/import'
      },
      {
        id: 'data-export',
        label: 'æ•°æ®å¯¼å‡º',
        icon: 'ğŸ“¤',
        path: '/admin/data/export'
      }
    ]
  },
  {
    id: 'settings',
    label: 'ç³»ç»Ÿè®¾ç½®',
    icon: 'âš™ï¸',
    children: [
      {
        id: 'general',
        label: 'å¸¸è§„è®¾ç½®',
        icon: 'ğŸ”§',
        path: '/admin/settings/general'
      },
      {
        id: 'security',
        label: 'å®‰å…¨è®¾ç½®',
        icon: 'ğŸ›¡ï¸',
        path: '/admin/settings/security'
      },
      {
        id: 'integrations',
        label: 'é›†æˆé…ç½®',
        icon: 'ğŸ”—',
        path: '/admin/settings/integrations'
      },
      {
        id: 'appearance',
        label: 'å¤–è§‚è®¾ç½®',
        icon: 'ğŸ¨',
        path: '/admin/settings/appearance'
      }
    ]
  }
])

// å±•å¼€çš„èœå•é¡¹
const expandedItems = ref<string[]>(['users', 'workflows'])

// è®¡ç®—å±æ€§
const sidebarClasses = computed(() => [
  'admin-sidebar',
  {
    'admin-sidebar--collapsed': props.collapsed,
    'admin-sidebar--collapsible': props.collapsible
  }
])

const sidebarStyles = computed(() => ({
  width: props.collapsed ? '64px' : `${props.width}px`
}))

const currentUser = computed(() => adminStore.currentUser)

// æ–¹æ³•
const isActive = (item: MenuItem): boolean => {
  if (item.path) {
    return route.path === item.path || route.path.startsWith(item.path + '/')
  }
  return false
}

const isExpanded = (itemId: string): boolean => {
  return expandedItems.value.includes(itemId)
}

const toggleExpand = (itemId: string) => {
  const index = expandedItems.value.indexOf(itemId)
  if (index > -1) {
    expandedItems.value.splice(index, 1)
  } else {
    expandedItems.value.push(itemId)
  }
}

const handleItemClick = (item: MenuItem) => {
  emit('item-click', item)
  
  if (item.path) {
    router.push(item.path)
  } else if (item.children) {
    toggleExpand(item.id)
  }
}

const handleToggle = () => {
  emit('toggle')
}

// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œè‡ªåŠ¨å±•å¼€ç›¸å…³èœå•
watch(() => route.path, (newPath) => {
  menuItems.value.forEach(item => {
    if (item.children) {
      const hasActiveChild = item.children.some(child => 
        child.path && newPath.startsWith(child.path)
      )
      if (hasActiveChild && !isExpanded(item.id)) {
        expandedItems.value.push(item.id)
      }
    }
  })
}, { immediate: true })
</script>

<template>
  <aside 
    :class="sidebarClasses"
    :style="sidebarStyles"
  >
    <!-- ä¾§è¾¹æ å¤´éƒ¨ -->
    <div class="sidebar-header">
      <div class="logo-section">
        <div class="logo-icon">ğŸ›ï¸</div>
        <div v-if="!collapsed" class="logo-text">
          <div class="logo-title">ç®¡ç†åå°</div>
          <div class="logo-subtitle">Admin Panel</div>
        </div>
      </div>
      
      <button
        v-if="collapsible"
        @click="handleToggle"
        class="collapse-button"
        :title="collapsed ? 'å±•å¼€ä¾§è¾¹æ ' : 'æ”¶èµ·ä¾§è¾¹æ '"
      >
        {{ collapsed ? 'â–¶ï¸' : 'â—€ï¸' }}
      </button>
    </div>
    
    <!-- å¯¼èˆªèœå• -->
    <nav class="sidebar-nav">
      <div class="nav-section">
        <SidebarMenuItem
          v-for="item in menuItems"
          :key="item.id"
          :item="item"
          :collapsed="collapsed"
          :active="isActive(item)"
          :expanded="isExpanded(item.id)"
          @click="handleItemClick"
          @toggle="toggleExpand(item.id)"
        />
      </div>
    </nav>
    
    <!-- ç”¨æˆ·ä¿¡æ¯ -->
    <div class="sidebar-footer">
      <UserProfile 
        v-if="currentUser"
        :user="currentUser"
        :collapsed="collapsed"
        class="user-profile"
      />
      
      <!-- å¿«æ·æ“ä½œ -->
      <div v-if="!collapsed" class="quick-actions">
        <button class="quick-action-button" title="å¸®åŠ©æ–‡æ¡£">
          â“
        </button>
        <button class="quick-action-button" title="åé¦ˆå»ºè®®">
          ğŸ’¬
        </button>
        <button class="quick-action-button" title="è®¾ç½®">
          âš™ï¸
        </button>
      </div>
    </div>
  </aside>
</template>

<style scoped>
.admin-sidebar {
  background: linear-gradient(180deg, #1e293b 0%, #334155 100%);
  color: white;
  display: flex;
  flex-direction: column;
  transition: width 0.3s ease;
  overflow: hidden;
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
}

.admin-sidebar--collapsed {
  width: 64px !important;
}

.sidebar-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 16px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  min-height: 80px;
}

.logo-section {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.logo-icon {
  font-size: 24px;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  flex-shrink: 0;
}

.logo-text {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.logo-title {
  font-size: 16px;
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.logo-subtitle {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.7);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.collapse-button {
  width: 24px;
  height: 24px;
  border: none;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.collapse-button:hover {
  background: rgba(255, 255, 255, 0.2);
}

.sidebar-nav {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px 0;
}

.nav-section {
  display: flex;
  flex-direction: column;
  gap: 2px;
  padding: 0 8px;
}

.sidebar-footer {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  padding: 16px;
}

.user-profile {
  margin-bottom: 12px;
}

.quick-actions {
  display: flex;
  justify-content: center;
  gap: 8px;
}

.quick-action-button {
  width: 32px;
  height: 32px;
  border: none;
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  transition: all 0.2s ease;
}

.quick-action-button:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-1px);
}

/* æ»šåŠ¨æ¡æ ·å¼ */
.sidebar-nav::-webkit-scrollbar {
  width: 4px;
}

.sidebar-nav::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
}

.sidebar-nav::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.3);
  border-radius: 2px;
}

.sidebar-nav::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.5);
}

/* å“åº”å¼é€‚é… */
@media (max-width: 768px) {
  .admin-sidebar {
    position: fixed;
    top: 0;
    left: 0;
    height: 100vh;
    z-index: 1001;
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }
  
  .admin-sidebar.open {
    transform: translateX(0);
  }
}

/* æš—è‰²ä¸»é¢˜é€‚é… */
[data-theme="dark"] .admin-sidebar {
  background: linear-gradient(180deg, #0f172a 0%, #1e293b 100%);
}
</style>
```

### ä¾§è¾¹æ èœå•é¡¹ç»„ä»¶

```vue
<!-- components/admin/layout/SidebarMenuItem.vue -->
<script setup lang="ts">
import { computed } from 'vue'

interface MenuItem {
  id: string
  label: string
  icon: string
  path?: string
  children?: MenuItem[]
  badge?: string | number
  disabled?: boolean
}

interface Props {
  item: MenuItem
  collapsed: boolean
  active: boolean
  expanded: boolean
  level?: number
}

const props = withDefaults(defineProps<Props>(), {
  level: 0
})

interface Emits {
  'click': [item: MenuItem]
  'toggle': [itemId: string]
}

const emit = defineEmits<Emits>()

const itemClasses = computed(() => [
  'sidebar-menu-item',
  `sidebar-menu-item--level-${props.level}`,
  {
    'sidebar-menu-item--active': props.active,
    'sidebar-menu-item--expanded': props.expanded,
    'sidebar-menu-item--disabled': props.item.disabled,
    'sidebar-menu-item--has-children': props.item.children && props.item.children.length > 0,
    'sidebar-menu-item--collapsed': props.collapsed
  }
])

const handleClick = () => {
  if (props.item.disabled) return
  
  if (props.item.children && props.item.children.length > 0) {
    emit('toggle', props.item.id)
  } else {
    emit('click', props.item)
  }
}

const handleChildClick = (child: MenuItem) => {
  emit('click', child)
}

const handleChildToggle = (childId: string) => {
  emit('toggle', childId)
}
</script>

<template>
  <div class="sidebar-menu-item-wrapper">
    <!-- ä¸»èœå•é¡¹ -->
    <div 
      :class="itemClasses"
      @click="handleClick"
      :title="collapsed ? item.label : undefined"
    >
      <!-- å›¾æ ‡ -->
      <div class="menu-item-icon">
        <span class="icon-emoji">{{ item.icon }}</span>
      </div>
      
      <!-- æ ‡ç­¾å’Œå¾½ç«  -->
      <div v-if="!collapsed" class="menu-item-content">
        <span class="menu-item-label">{{ item.label }}</span>
        
        <!-- å¾½ç«  -->
        <span 
          v-if="item.badge" 
          class="menu-item-badge"
        >
          {{ item.badge }}
        </span>
      </div>
      
      <!-- å±•å¼€ç®­å¤´ -->
      <div 
        v-if="!collapsed && item.children && item.children.length > 0"
        class="menu-item-arrow"
        :class="{ 'menu-item-arrow--expanded': expanded }"
      >
        â–¼
      </div>
    </div>
    
    <!-- å­èœå• -->
    <div 
      v-if="!collapsed && item.children && item.children.length > 0"
      class="menu-item-children"
      :class="{ 'menu-item-children--expanded': expanded }"
    >
      <SidebarMenuItem
        v-for="child in item.children"
        :key="child.id"
        :item="child"
        :collapsed="false"
        :active="false"
        :expanded="false"
        :level="level + 1"
        @click="handleChildClick"
        @toggle="handleChildToggle"
      />
    </div>
    
    <!-- æŠ˜å çŠ¶æ€ä¸‹çš„å­èœå•æç¤º -->
    <div 
      v-if="collapsed && item.children && item.children.length > 0"
      class="collapsed-children-indicator"
    >
      <div class="indicator-dot"></div>
    </div>
  </div>
</template>

<style scoped>
.sidebar-menu-item-wrapper {
  position: relative;
}

.sidebar-menu-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  margin: 2px 0;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
  min-height: 40px;
}

.sidebar-menu-item:hover:not(.sidebar-menu-item--disabled) {
  background: rgba(255, 255, 255, 0.1);
}

.sidebar-menu-item--active {
  background: rgba(59, 130, 246, 0.2);
  color: #93c5fd;
}

.sidebar-menu-item--active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 3px;
  height: 20px;
  background: #3b82f6;
  border-radius: 0 2px 2px 0;
}

.sidebar-menu-item--disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.sidebar-menu-item--collapsed {
  justify-content: center;
  padding: 8px;
}

.sidebar-menu-item--level-1 {
  padding-left: 24px;
}

.sidebar-menu-item--level-2 {
  padding-left: 36px;
}

.menu-item-icon {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.icon-emoji {
  filter: grayscale(1) brightness(0) invert(1);
}

.sidebar-menu-item--active .icon-emoji {
  filter: none;
}

.menu-item-content {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  min-width: 0;
}

.menu-item-label {
  font-size: 14px;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.menu-item-badge {
  background: #ef4444;
  color: white;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 10px;
  min-width: 16px;
  text-align: center;
  line-height: 1.2;
}

.menu-item-arrow {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.6);
  transition: transform 0.2s ease;
  flex-shrink: 0;
}

.menu-item-arrow--expanded {
  transform: rotate(180deg);
}

.menu-item-children {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}

.menu-item-children--expanded {
  max-height: 500px;
}

.collapsed-children-indicator {
  position: absolute;
  right: 4px;
  top: 50%;
  transform: translateY(-50%);
}

.indicator-dot {
  width: 4px;
  height: 4px;
  background: rgba(255, 255, 255, 0.5);
  border-radius: 50%;
}

/* å­èœå•é¡¹æ ·å¼ */
.sidebar-menu-item--level-1 {
  background: rgba(0, 0, 0, 0.1);
}

.sidebar-menu-item--level-1:hover {
  background: rgba(255, 255, 255, 0.05);
}

.sidebar-menu-item--level-1.sidebar-menu-item--active {
  background: rgba(59, 130, 246, 0.15);
}

.sidebar-menu-item--level-2 {
  background: rgba(0, 0, 0, 0.15);
}

.sidebar-menu-item--level-2:hover {
  background: rgba(255, 255, 255, 0.05);
}

.sidebar-menu-item--level-2.sidebar-menu-item--active {
  background: rgba(59, 130, 246, 0.1);
}

/* åŠ¨ç”»æ•ˆæœ */
@keyframes slideIn {
  from {
    opacity: 0;
    transform: translateX(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.menu-item-children--expanded .sidebar-menu-item {
  animation: slideIn 0.2s ease forwards;
}

/* å“åº”å¼é€‚é… */
@media (max-width: 768px) {
  .sidebar-menu-item {
    padding: 12px 16px;
    min-height: 48px;
  }
  
  .menu-item-label {
    font-size: 16px;
  }
}
</style>
```

---

## ğŸ“‹ å¸ƒå±€å¼€å‘æ£€æŸ¥æ¸…å•

### è®¾è®¡é˜¶æ®µ
- [ ] ç¡®å®šå¸ƒå±€ç»“æ„å’Œç»„ä»¶å±‚æ¬¡
- [ ] è®¾è®¡å“åº”å¼æ–­ç‚¹å’Œé€‚é…ç­–ç•¥
- [ ] è§„åˆ’ä¸»é¢˜ç³»ç»Ÿå’Œæ ·å¼å˜é‡
- [ ] è€ƒè™‘å¯è®¿é—®æ€§å’Œé”®ç›˜å¯¼èˆª

### å®ç°é˜¶æ®µ
- [ ] åˆ›å»ºä¸»å¸ƒå±€ç»„ä»¶
- [ ] å®ç°ä¾§è¾¹æ å’Œå¯¼èˆªç³»ç»Ÿ
- [ ] å¼€å‘å“åº”å¼å®¹å™¨ç»„ä»¶
- [ ] æ·»åŠ è°ƒæ•´å¤§å°åŠŸèƒ½
- [ ] å®ç°é¢æ¿ç³»ç»Ÿ

### äº¤äº’ä¼˜åŒ–
- [ ] æ·»åŠ å¹³æ»‘è¿‡æ¸¡åŠ¨ç”»
- [ ] å®ç°é”®ç›˜å¿«æ·é”®
- [ ] ä¼˜åŒ–è§¦æ‘¸è®¾å¤‡ä½“éªŒ
- [ ] æ·»åŠ æ‹–æ‹½å’Œè°ƒæ•´åŠŸèƒ½

### æ€§èƒ½ä¼˜åŒ–
- [ ] ä¼˜åŒ–å¸ƒå±€é‡æ’å’Œé‡ç»˜
- [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ·»åŠ æ‡’åŠ è½½æœºåˆ¶
- [ ] ä¼˜åŒ–CSSå’ŒJavaScriptæ€§èƒ½

### æµ‹è¯•éªŒè¯
- [ ] è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•
- [ ] å“åº”å¼è®¾è®¡æµ‹è¯•
- [ ] å¯è®¿é—®æ€§æµ‹è¯•
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•

è¿™ä»½å¸ƒå±€ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸ºvue-flowåå°ç®¡ç†ç³»ç»Ÿæä¾›äº†å®Œæ•´çš„å¸ƒå±€è§£å†³æ–¹æ¡ˆï¼Œç¡®ä¿ç³»ç»Ÿå…·æœ‰è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒå’Œå¯ç»´æŠ¤æ€§ã€‚
